---
keywords: 故障诊断;常见问题解答;FAQ;推荐;特殊字符;属性权重;内容相似度
description: 视图关于Adobe [!DNL Target] Recommendations活动的常见问题解答列表。
title: 在哪里可以找到关于 [!DNL Target] Recommendations的问题和答案？
feature: Recommendations
exl-id: aaa52923-1c2d-44ae-bd89-671329222077
translation-type: tm+mt
source-git-commit: 32eeec786af7aba747881ac84ef17d7a0124a45a
workflow-type: tm+mt
source-wordcount: '2940'
ht-degree: 33%

---

# ![PREMIUM](/help/assets/premium.png) “推荐”常见问题解答 

关于[!DNL Adobe Target] [!DNL Recommendations]活动的常见问题列表(FAQ)。

## 当我使用数值搜索自定义属性时，为什么[!UICONTROL 目录搜索]不显示正确的结果？

当您使用数字值对自定义属性执行目录搜索时，结果会将自定义属性视为字符串类型而不是数字值。

目前，没有允许客户更改属性类型的功能。 要进行更改，请[打开一个客户问题](/help/cmp-resources-and-contact-information.md#reference_ACA3391A00EF467B87930A450050077C)，该问题引用需要类型从字符串更改为数字的属性。

## 我的目录中的项目更新需要多长时间才能反映在我的网站上？

时间范围和结果会因项目的更新方式而异。

| 来源 | 详细信息 |
| --- | --- |
| 通过mbox或API更新的项属性 | <ul><li>Recommendations将在15分钟内更新。</li><li>在更新可用之前，将显示现有推荐和项目属性。</li><li>目录搜索在目录索引后更新（3-8小时）。</li></ul> |
| 通过源更新的物料属性 | <ul><li>Recommendations在收录后（2-8小时）进行更新。</li><li>在更新可用之前，将显示现有推荐和项目属性。</li><li>目录搜索在源摄取（2-8小时）和后续目录索引（3-8小时）后更新。 目录搜索在总共5-16小时内更新。</li></ul> |
| 通过[!DNL Target] UI或API从目录中删除的项目 | <ul><li>Recommendations将在15分钟内更新。</li><li>在更新可用之前，将显示现有推荐和项目属性。</li><li>目录搜索在目录索引后更新（3-8小时）。</li></ul> |
| 通过mbox或API添加到目录的项目 | <ul><li>Recommendations在算法运行后更新。 算法运行计划为1-2天算法每12小时运行一次，7天以上算法每24小时运行一次。</li><li>如果添加的项目不是请求的密钥，则在更新可用之前显示现有推荐。</li><li>如果添加的项是请求的键，则在更新可用之前显示备份建议。</li><li>目录搜索在目录索引后更新（3-8小时）。</li></ul> |
| 通过源添加到目录的项目 | <ul><li>Recommendations在摄入源后（2-8小时）进行更新。 对于1-2天算法，后续算法运行每12小时计划一次，对于7天以上的算法，每24小时计划一次。 Recommendations在2-32小时内更新。</li><li>如果添加的项目不是请求的密钥，则在更新可用之前显示现有推荐。</li><li>如果添加的项是请求的键，则在更新可用之前显示备份建议。</li><li>目录搜索在源摄取（2-8小时）和目录索引（3-8小时）后更新。 目录搜索在总共5-16小时内更新。</li></ul> |

在导入源文件后，或通过API或mbox接收实体更新后，以下更改将在60分钟内反映出来：

* 如果某个项之前被排除，但现在应该包括在内，则该项将包含在下一个算法运行中（12-24小时）。

   出现这种情况是因为[!DNL Target]同时在线和离线应用排除。 新排除某个项目时，将快速应用联机排除。 当新包含某个项目时，联机排除很快消失，但脱机排除直到下一个算法运行才消失。

* 如果之前包括某个项目，但现在应排除该项目，则根据“已更新的项目属性……”排除该项目 根据源（通过mbox/API 15分钟，或通过源12-24小时），上述时间线将有所讨论。

在下一个算法运行后（12-24 小时内），才会反映以下更改：

* 在用于活动的收藏集规则中使用的项目属性。
* 在基于与活动关联的属性或收藏集的促销活动中使用的项目属性。
* 项目在其中显示为“最畅销商品”或“查看次数最多”算法中的“当前类别”或“最喜爱的类别”的项目类别。
* 当更改的属性是用作算法自定义键的自定义属性时的推荐项目排名。
* 当推荐逻辑为“具有相似属性的项”时、当使用“内容相似性”加权因子时或当使用“属性加权”因子时，基于一个或多个更改的属性对推荐项进行排序。

>[!NOTE]
>
>当信息源文件的状态从“正在导入项目”变为“正在准备搜索索引更新”时，信息源文件会被视为已导入。更新可能需要60分钟以上的时间才能反映在目录搜索用户界面中；Catalog Search是动态消息状态更改为“已完成更新”时的最新状态。 即使目录搜索尚未更新，您的网站也会反映上述时间范围的更新。 最新的“目录搜索”索引更新时间将显示在“目录搜索”页面上。

## 对我的[!UICONTROL Recommendations]活动、优惠、促销或标准设置的配置进行更改需要多长时间才能反映在我的网站上？

* 对促销设置所做的更改最多可能需要5小时才能在现场反映。
* 在下一个算法运行之前，可能不会反映对其他条件设置的更改：

   * 某些条件设置（例如“添加动态包含规则”）会立即反映出来。
   * 在下一个算法运行之前，其他条件设置（例如“删除动态包含规则”、更改回顾窗口等）无法合并。
   * 算法运行由这些更改触发，但最长可能需要24小时才能完成。 算法也按计划每12-24小时运行一次。

## 用户的行为（例如，单击产品A和购买产品B）需要多长时间才能反映在用户收到的推荐&#x200B;*中？*

* 当前查看/购买的产品/内容会影响用户在同一页面查看/[!DNL Target]内容请求上收到的推荐。
* 历史用户行为（如“上次查看的产品”、“最常查看的产品”）和总体查看/购买历史记录将使用该请求进行更新，并影响用户在下一页查看/[!DNL Target]内容请求时收到的推荐。 例如，“最近查看的项目”和“推荐给您”算法会随每个产品视图/购买进行更新，并反映在后续内容请求中。

## 用户的行为（例如，单击产品A和购买产品B）需要多长时间才能反映在用户收到的推荐&#x200B;*其他*&#x200B;中？

在离线算法处理中，每12-24小时运行一次算法，将用户在聚合中的行为融入到离线算法处理中。

## 如果特殊字符破坏了数组，我应该怎么做？{#section_D27214116EE443638A60887C7D1C534E}

在 JavaScript 中使用转义值。引号 (&quot;) 可能会破坏数组。以下代码片段是一个转义值示例：

```
#set($String='') 
#set($escaper=$String.class.forName('org.apache.commons.lang.StringEscapeUtils')) 
<script type="text/javascript"> 
console.log("$escaper.escapeJavaScript($entity1.name)") 
console.log("$escaper.escapeJavaScript($entity2.name)") 
console.log('$escaper.escapeJavaScript($entity3.name)') 
names.push("$escaper.escapeJavaScript($entity4.name)") 
</script>
```

## 创建“推荐”活动时，为何并不是所有标准（包括自定义标准）都可选择？ {#section_B2265AC8B8A94E0298D495A05C5D817F}

可用的标准依据当前类别而定。创建推荐优惠时，算法选取器会根据类别ID显示条件。

如果要应用标准的位置不包含类别 ID，则算法选择器中不会提供相应的标准。

如果您使用mbox中存在类别ID的位置，则条件选取器包含所有适用的条件。

[!DNL Target] 具有“滤 [镜不兼](/help/c-recommendations/plan-implement.md#concept_C1E1E2351413468692D6C21145EF0B84) 容标准”以控制算法选取器的智能过滤。

>[!NOTE]
>
>此设置仅适用于在可视化体验编辑器 (VEC) 中创建的活动。此设置不适用于在基于表单的体验编辑器中创建的活动（[!DNL Target]没有位置上下文）。

要访问“[!UICONTROL 筛选不兼容的标准]”设置，请单击“[!UICONTROL 推荐]”>“[!UICONTROL 设置]”：

![](assets/recs_settings_filter.png)

如果“[!UICONTROL 筛选不兼容的标准]”设置未启用，则 不会对算法选择器中的算法进行筛选，因而会显示所有算法。[!DNL Target]

如果启用了[!UICONTROL “筛选器不兼容标准]”设置，则在VEC活动中，[!DNL Target]从所选位置读取entityId和类别ID，然后显示基于`currentItem|currentCategory`的算法（如果该位置存在相应的值）。 因此，默认情况下，算法选择器中仅会显示选定位置的兼容算法。

如果“[!UICONTROL 筛选不兼容的标准]”设置已启用，您仍然能够查看不兼容的算法，方法是在选择标准时取消选中“[!UICONTROL 兼容]”复选框。

![](assets/compatible_checkbox.png)

以下列表包含一些特殊情况，其中[!DNL Target]不显示[!UICONTROL 兼容]复选框：

* 位置中同时存在实体 ID 和类别 ID，在这种情况下将不进行任何筛选。
* 您使用的是 [!DNL mbox.js] 版本 55 或更低版本。
* 未从页面触发任何 mbox 调用 (!config.isAutoCreateGlobalMbox &amp;&amp; !config.isRegionalMbox)
* [!DNL Target] 未定义参数。

## 如果“推荐”中的某个收藏集变为零 (0)，我应该怎么做？{#section_E2DB2FE67CF24EEC81412BFF3FA6385D}

如果您看到某个之前不为零的收藏集变为零，请考虑以下信息：

* 您可以重新保存集合并查看它是否更新了数字。 通过重新保存，集合将重新运行使用该集合的所有算法。
* 您所查看的环境是否正确？请转到 [!DNL /target/products.html#recsSettings] 进行复查（如下所示）。

   ![](assets/product_catalog.png)

* 索引是否为最新？转到[!DNL /target/products.html#productSearch]并检查索引的存在时间（例如，“3小时前已索引”）。 如有需要，您可以刷新索引。
* 您是否更改过信息源或数据层，从而导致实体不再匹配收藏集规则？请确保大小写匹配（区分大小写）。
* 信息源是否已成功运行？是否有人更改了FTP目录、密码等？
* [!DNL Target] 会尽可能在最短的时间内生成交付更新（在客户的页面/应用程序中）。但是，[!DNL Target]还必须在UI中为营销人员提供一些表示形式。 [!DNL Target] 不会延迟投放更新以等待UI更新同步。您可以使用 [mboxTrace](/help/c-activities/c-troubleshooting-activities/content-trouble.md) 来查看收到请求时系统中包含哪些内容。

## 一般的属性权重与特定于内容相似度的属性权重之间有何区别？{#section_FCD96598CBB44B16A4C6C084649928FF}

属性权重存在两种形式：“标准属性权重”和“内容相似度属性权重”。

“标准属性权重”适用于大部分（如果不是适用于全部）标准类型（不仅仅包括内容相似度）。此类型的权重会赋予某些属性值较高的权重。在以下示例中，Nike产品在产出建议中遇到了困难。

![](assets/attribute_weighting_example.png)

“内容相似度属性权重”仅适用于内容相似度标准。

这是一种更为动态的权重类型，以当前的“推荐键”（当前查看的项目）为基础。在以下示例中（品牌 x 16），如果访客在查看耐克运动鞋，则很有可能向该访客推荐其他耐克产品（不一定只是运动鞋），而不是向其推荐竞争品牌的运动鞋。如果访客观看阿迪达斯的运动鞋，那访客更可能被推荐为阿迪达斯产品。

![](assets/content_similarity_example.png)

## 为什么[!DNL Target]有时无法显示建议？{#section_DB3F40673AED42228E407C05437D99E9}

[!DNL Target] 有时无法显示推荐，原因在于可用推荐的数量过低。

每个标准生成的值数是设计中指定的图元数的三倍。 运行时筛选（例如库存和 mbox 属性匹配）将在生成 3 倍的值后进行应用，因此有可能在交付时最终生成的值不足 3 倍。要缓解这种情况，请通过隐藏其他图元来增加设计中的图元数。

可在设计开始时使用以下 JavaScript 来增加请求实体的数量。在此示例中，请求的实体计数将为 30 (3x10)。

```
#foreach($entity in $entities) 
 #if( $foreach.count > 10 ) 
  #break 
 #end 
 #set ($foo = $entity.id) 
#end 
```

## 用于插入/更新产品的 API 调用的大小限制是多少？我能否使用 API 而不是信息源在一次调用中更新 50,000 个产品？  {#section_434FE1F187B7436AA39B7C14C7895168}

[!DNL Target] 在应用程序级别规定50-MB的员额限制；但是，仅当您传递内容类 `application/x-www-form-urlencoded` 型标题时。

您当然可以尝试在一次调用中发送 50,000 个产品。如果失败，您可以将其分批处理。 Adobe建议客户将其调用分为5,000或10,000个产品批，以降低系统负载导致超时的可能性。

## 在创建Recommendations标准、促销或模板测试规则时，是否必须指定mbox名称？{#section_FFA42ABCC5954B48A46526E32A3A88A2}

在基于 mbox 参数创建推荐标准、促销活动或模板测试规则时，`mboxParameter` 不再提示您输入 `mboxName`。mbox 名称现在是可选的。通过这项更改，您可以使用多个 mbox 中的参数或引用尚未记录到 Edge 的参数。

要选择所需的参数，请执行以下操作：

* 在创建标准、升级或模板测试规则时，从列表中选择参数名称。 开始键入所需参数名称的首个字符，或键入所需参数名称的全名。
* 如果您记得 mbox 名称而不记得参数名称，则使用复选框筛选传递所需参数的已知 mbox。

无论使用哪种方法，mbox 和参数之间均没有链接。标准、提升或模板测试规则基于传递该参数的所有mbox中的参数工作。

如果您编辑现有标准、促销活动或模板测试规则，则会显示筛选标准以及在创建期间提供的 mbox 名称。

## 在定义新受众后，为什么我无法保存旧版“推荐”活动？  {#section_1E47C40B1FE7479BAC3EE0F50CE7C2C4}

确保受众具有唯一的名称。如果您为受众指定了与现有受众相同的名称，则无法保存旧版“推荐”活动（在 2016 年 10 月之前创建的“推荐”活动）。

## 可用于信息源上传的 CSV 文件的最大大小是多少？  {#section_20F1AF4839A447B9889B246D6E873538}

对于上传信息源的 CSV 文件，其行数或文件大小没有硬性限制。但是，作为最佳实践，Adobe建议将CSV文件大小限制为1 GB，以避免在文件上传过程中出现故障。 如果文件大小超过1 GB，理想情况下可以将其拆分为多个源文件。 自定义属性列的最大数量为 100，自定义属性限制为 4,096 个字符。在[[!DNL Target] 限制页面](/help/r-troubleshooting-target/target-limits.md#reference_BEFE60C3AAA442FF94D4EBFB9D3CC9B1)中，可以使用对所需列长度的其他限制。

## 是否可以动态排除实体？{#exclude}

在查询字符串中，您可以传递要从推荐中排除的实体 ID。例如，您可以排除已在购物车中的项目。

要启用排除功能，请使用 `excludedIds` mbox 参数。此参数指向一个以逗号分隔的实体 ID 列表。例如，`mboxCreate(..., "excludedIds=1,2,3,4,5")`。该值将在请求推荐时发送。

仅对当前[!DNL Target]调用执行排除；除非再次传递`excludedIds`值，否则在后续[!DNL Target]调用中不排除项。 要从每页的推荐中排除购物车中的项目，请继续在每页传递`excludedIds`值。

>[!NOTE]
>
>如果排除的实体过多，则 Recommendations 所表现出的行为就像是没有足够的实体来填充推荐模板。

要排除`entityIds`，请将`&excludes=${mbox.excludedIds}`标记附加到优惠内容url。 在提取了内容 URL 之后，所需参数将使用当前的 mbox 请求参数替代。

默认情况下，新创建的推荐将启用此功能。现有推荐必须进行保存才能支持动态排除的实体。

## 在Recommendations内容跟踪中有时返回的NO_CONTENT响应表示什么？

当所请求的算法和密钥组合的推荐不可用时，返回NO_CONTENT。 通常情况下，当算法禁用备份且以下一项或多项也为true时，会发生这种情况：

* 结果尚未就绪。

   这种情况通常发生在首次保存新创建的活动或对活动中使用的集合、条件或促销进行配置更改之后。

* 对于请求的算法/密钥组合，结果已准备就绪，但尚未在最近的边缘服务器上缓存。

   请求启动缓存操作，因此在重新加载几页和/或几分钟后，此问题应会自行解决。

* 结果已准备就绪，但对于提供的键值不可用。

   这种情况通常发生在为最近算法运行后添加到目录的项目请求建议时，并在下一个算法运行后解析自身。

* 部分模板渲染功能被禁用，并且没有足够的结果可用于填充模板。

   这种情况通常发生在您有动态包含规则时，该规则会从可能的结果中积极过滤器许多项目。 要避免出现这种情况，请启用备份，但不要将包含规则应用于备份，或按顺序使用标准，并且筛选条件不那么激进。

## 基于最近查看的项目的推荐是否会跨多个设备保留以用于单个访客?{#persist-across-devices}

当访客启动会话时，会话ID将绑定到单个边缘计算机，并在该边缘计算机上存储临时用户档案缓存。 来自同一会话的后续请求读取此用户档案缓存，包括最近查看的项。

当会话结束(通常，在30分钟内没有活动后过期时)时，会话状态（包括最近查看的项目）将保留到同一地理边缘中的更永久的用户档案存储。

随后，来自不同设备的后续会话可以访问这些最近查看的项目，只要新会话通过相同的用户档案ID(MCID)、Experience CloudID(ECID)或CustomerID/mbox3rdPartyId链接到客户Marketing Cloud。

如果访客同时有两个活动会话，则一个设备上最近查看的项目不会更新另一个设备上最近查看的项目，除非这些设备被强制共享会话ID。 可能存在此问题的解决方法，但[!DNL Target]不直接支持跨多个设备共享会话ID。 客户必须自行管理此ID共享。

如果某台设备上的访客处于活动状态，几分钟后在另一台设备上变为活动状态，则仍会发生此行为。 第一个设备的会话不会过期30分钟，在将用户档案状态写入永久状态并进行处理之前，最多可能有5分钟的延迟。 在测试此行为时，允许35分钟会话过期和存储用户档案。

如果访客不同时有两个活动会话，则只要会话结束，一个设备上最近查看的项目就会更新另一个设备上最近查看的项目。 在测试此行为时，允许会话过期35分钟。
